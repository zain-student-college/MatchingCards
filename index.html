<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <script src="https://cdn.tailwindcss.com"></script> -->
    <link rel="stylesheet" href="style.css">
    <style>
        .flip-container {
            perspective: 1000px;
        }

        .flip-card {
            transition: transform 0.7s;
            transform-style: preserve-3d;
            position: relative;
            transform-style: preserve-3d; /* Important */
        }

        .flipped {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            backface-visibility: hidden;
            box-shadow: 4px 4px 4px  black;
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            border: 3px solid white; /* âœ… Border now rotates */

            border-radius: 8px;
        }

        .card-front {
            background-color: rgb(238, 23, 23);
          
        }

        .card-back {
            background-color: none;
            transform: rotateY(180deg);
          
        
        }
    </style>
</head>
<body class="bg-[#84DCCF] h-screen">
    <!-- Heading -->
    <div class="flex items-center justify-center h-[8%] bg-[#312F2F] text-white text-2xl font-mono">
        <h1>Matching Cards</h1>
    </div>

    <!-- Body After Heading -->
    <div class="p-1">
        <div id="wintext" class="flex justify-center mt-5 capitalize text-lg font-bold text-[#1E3A8A]  transition-all duration-500 scale-0 origin-center"><h1 class=" "></h1></div>
        <!-- Container -->
        <div class="mt-6 h-[400px] p-1">
            <!-- Row 1 -->
            <div class="h-1/4 flex justify-around">
                <button class="flip-container  w-1/4 h-full" onclick="this.children[0].classList.add('flipped')">
                    <div class="flip-card w-full h-full relative">
                        <div class="card-front">1</div>
                        <div class="card-back"><img  class="card-back-img h-full w-full rounded-md object-cover" src="" alt=""></div>
                    </div>
                </button> 

                <button class="flip-container  w-1/4 h-full" onclick="this.children[0].classList.add('flipped')">
                    <div class="flip-card w-full h-full relative">
                        <div class="card-front">2</div>
                        <div class="card-back"><img class="card-back-img h-full w-full rounded-md object-cover" src="" alt=""></div>
                    </div>
                </button> 

                <button class="flip-container  w-1/4 h-full" onclick="this.children[0].classList.add('flipped')">
                    <div class="flip-card w-full h-full relative">
                        <div class="card-front">3</div>
                        <div class="card-back"><img class="card-back-img h-full w-full rounded-md object-cover" src="" alt=""></div>
                    </div>
                </button> 
            </div>

            <!-- Row 2 -->
            <div class="h-1/4 flex justify-around mt-5">
                <button class="flip-container  w-1/4 h-full" onclick="this.children[0].classList.add('flipped')">
                    <div class="flip-card w-full h-full relative">
                        <div class="card-front">4</div>
                        <div class="card-back"><img class="card-back-img h-full w-full rounded-md object-cover" src="" alt=""></div>
                    </div>
                </button> 

                <button class="flip-container w-1/4 h-full" onclick="this.children[0].classList.add('flipped')">
                    <div class="flip-card w-full h-full relative">
                        <div class="card-front">5</div>
                        <div class="card-back"><img class="card-back-img h-full w-full rounded-md object-cover" src="" alt=""></div>
                    </div>
                </button> 

                <button class="flip-container  w-1/4 h-full" onclick="this.children[0].classList.add('flipped')">
                    <div class="flip-card w-full h-full relative">
                        <div class="card-front">6</div>
                        <div class="card-back"><img class="card-back-img h-full w-full rounded-md object-cover" src="" alt=""></div>
                    </div>
                </button> 
            </div>

            <!-- Row 3 -->
            <div class="h-1/4 flex justify-around mt-5">
                <button class="flip-container w-1/4 h-full" onclick="this.children[0].classList.add('flipped')">
                    <div class="flip-card w-full h-full relative">
                        <div class="card-front">7</div>
                        <div class="card-back"><img class="card-back-img h-full w-full rounded-md object-cover" src="" alt=""></div>
                    </div>
                </button> 

                <button class="flip-container  w-1/4 h-full" onclick="this.children[0].classList.add('flipped')">
                    <div class="flip-card w-full h-full relative">
                        <div class="card-front">8</div>
                        <div class="card-back"><img class="card-back-img h-full w-full rounded-md object-cover" src="" alt=""></div>
                    </div>
                </button> 

                <button class="flip-container w-1/4 h-full" onclick="this.children[0].classList.add('flipped')">
                    <div class="flip-card w-full h-full relative">
                        <div class="card-front">9</div>
                        <div class="card-back"><img class="card-back-img h-full w-full rounded-md object-cover" src="" alt=""></div>
                    </div>
                </button> 
            </div>

            <!-- Row 4 -->
            <div class="h-1/4 flex justify-around mt-5">
                <button class="flip-container  w-1/4 h-full" onclick="this.children[0].classList.add('flipped')">
                    <div class="flip-card w-full h-full relative">
                        <div class="card-front">10</div>
                        <div class="card-back"><img class="card-back-img h-full w-full rounded-md object-cover" src="" alt=""></div>
                    </div>
                </button> 

                <button class="flip-container w-1/4 h-full" onclick="this.children[0].classList.add('flipped')">
                    <div class="flip-card w-full h-full relative">
                        <div class="card-front">11</div>
                        <div class="card-back"><img class="card-back-img h-full w-full rounded-md object-cover" src="" alt=""></div>
                    </div>
                </button> 

                <button class="flip-container  w-1/4 h-full" onclick="this.children[0].classList.add('flipped')">
                    <div class="flip-card w-full h-full relative">
                        <div class="card-front">12</div>
                        <div class="card-back"><img class="card-back-img h-full w-full rounded-md object-cover" src="" alt=""></div>
                    </div>
                </button> 
            </div>

        </div>
        <div class="flex justify-center mt-24 text-xl font-semibold  "><a href="loader.html"><button id="playagain" class=" border-[3px] bg-yellow-600 hidde shadow-md shadow-black  hover:scale-105 transition-all duration-100  border-gray-900 p-1 rounded-md capitalize text-gray-50">play again?</button></a></div>
    </div>
    <script>
    
    let cards = document.querySelectorAll('.flip-container');
    let wintext = document.querySelector('#wintext');
    let playagain = document.querySelector('#playagain');
    let sound = new Audio('click-trim.mp3');
    let win = new Audio('win2.wav');
    let winsound = new Audio('wingame.mp3');
    let hasPlayed = false;
    let firstCard = null;
    let secondCard = null;
    let firstClick = null;
    let secondClick = null;
    let lockBoard = false;
    let winall = 0;
    
    // let img1 = 'img.jpeg';
    // let img2 = 'img2.jpeg';
    // let img3 = 'img3.jpeg';
    // let img4 = 'img4.jpeg';
    // let img5 = 'img5.jpeg';
    // let img6 = 'img6.jpeg';
    let images = [];

    function fetchimages(){
    for (let i=0;i<6;i++){
        images[i]="https://picsum.photos/2000?random=" + (Date.now() + i);
        
    }
shuffle();
  
};
fetchimages();
shuffle();
    // document.addEventListener('DOMContentLoaded', function() {
        // Create pairs of images and shuffle them
  function shuffle(){
   let  imagePairs = [...images,...images];

   for(let i=0;i<imagePairs.length;i++){
      let randomindex =  Math.floor(Math.random()*imagePairs.length)
      let randomimg = imagePairs[randomindex];
    //   console.log(randomimg);
        let finalimg =  imagePairs.splice(randomindex,1)[0];
        // console.log(imagePairs)
        imagePairs.push(finalimg);
        // console.log(imagePairs)
  };
  console.log(imagePairs);

        
           // Assign images to cards
        cards.forEach((card, index) => {
            if (index < imagePairs.length) {
                card.querySelector('.card-back-img').src = imagePairs[index];
            }
        });}

        cards.forEach(card => {
            card.addEventListener('click', () => {
                if (lockBoard || card === firstCard) return;

                sound.play();
                card.children[0].classList.add('flipped');

                if (!hasPlayed) {
                    firstCard = card;
                    firstClick = card.querySelector('.card-back-img').src;
                    hasPlayed = true;
                } else {
                    secondCard = card;
                    secondClick = secondCard.querySelector('.card-back-img').src;
                    lockBoard = true;
                    document.querySelectorAll('.flip-container').forEach(c => {
                        c.style.pointerEvents = 'none';
                    });
                    checkMatch();
                }
            });
        });

        function checkMatch() {
            if (firstClick === secondClick) {
                winall++;
                console.log('Match found');
                firstCard.style.pointerEvents = 'none';
                secondCard.style.pointerEvents = 'none';
                firstCard.disabled = true;
                secondCard.disabled = true;
                resetgame();
                sound.pause();
                win.play();
                winallcheck();

            } else {
                setTimeout(() => {
                    firstCard.children[0].classList.remove('flipped');
                    secondCard.children[0].classList.remove('flipped');
                    resetgame();
                }, 800);
            }
        };

        function resetgame() {
            firstCard = null;
            secondCard = null;
            firstClick = null;
            secondClick = null;
            hasPlayed = false;
            lockBoard = false;
            document.querySelectorAll('.flip-container').forEach(c => {
                c.style.pointerEvents = 'auto';
            });
        }
    

    function winallcheck(){
        if(winall===6){
            win.pause();
    
            wintext.textContent = 'Congratulations! All cards matched!';

// Remove the 'hidden' class to make it visible
wintext.classList.remove('hidden'); 
// Trigger the animation by removing the scale-0 and opacity-0, and adding scale-100 and opacity-100
setTimeout(() => {
    playagain.style.display = 'block';
    wintext.classList.remove('scale-0', 'opacity-0');
    wintext.classList.add('scale-100', 'opacity-100');
}, 150); 
            setTimeout(()=>{winsound.play();},300)            
        }
    }
winallcheck();




playagain.addEventListener('click', () => {
    playagain.style.display = 'none';
    wintext.textContent = '';
    resetgame();

    cards.forEach(card => {
        card.children[0].classList.remove('flipped'); // Correctly removes the 'flipped' class
        card.disabled = false; // Enable the card again
    });

    images = [];
    fetchimages();    
    winall = 0;
    winallcheck(); // Call to check for the win condition again
});

// });

    </script>
</body>
</html>
